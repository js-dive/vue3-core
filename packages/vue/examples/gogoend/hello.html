<!--
 * @Author: gogoend
 * @Date: 2020-02-02 01:34:53
 * @LastEditors: gogoend
 * @LastEditTime: 2020-06-29 23:51:00
 * @FilePath: \vue\examples\modal\index.html
 * @Description:
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>CreateElement 函数</title>
  <!-- Delete ".min" for console warnings in development -->
  <script src="../../dist/vue.global.js""></script>
</head>

<body>

  <div id="app">
  </div>

  <script>
    const { createApp, ref, watchEffect, defineComponent, h, computed, watch, onMounted, toRefs, reactive } = Vue
    const nana = defineComponent({
      setup() {
        const state = toRefs(reactive({
          nanaMsg: 'nana'
        }))
        const nanaMsgWithNumber = computed(() => state.nanaMsg.value + '100')
        watch(() => state.nanaMsg, (val) => {
          console.log(val)
        }, {
          immediate: true
        })

        onMounted(() => {
          setTimeout(() => {
            state.nanaMsg.value = 'nanaco'
          }, 4000)
        })
        return () => h(
          'div',
          {},
          [
            h('span', { style: { color: 'red' } }, state.nanaMsg.value),
            h('br'),
            h('span', { style: { color: 'blue' } }, nanaMsgWithNumber.value)
          ]
        )
      }
    })
    console.log(nana)

    createApp({
      components: {
        nana
      },
      setup() {
        const message = ref('hello world')
        return () => h('div', { attrs: { id: 'app' } }, [message.value, h(nana)])
      }
    }).mount('#app')
  </script>
  </body>

</html>